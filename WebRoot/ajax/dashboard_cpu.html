
<div class="row">
	<div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
		<h1 class="page-title txt-color-blueDark"><i class="fa-fw fa fa-home"></i>仪版表<span>>我的仪盘表</span></h1>
	</div>

</div>
<!-- widget grid -->
<section id="widget-grid" class="">

	<!-- row -->
	<div class="row">
		<article class="col-sm-12">
			<!-- new widget -->
			<div class="jarviswidget" id="wid-id-0" data-widget-togglebutton="false" data-widget-editbutton="false" data-widget-fullscreenbutton="false" data-widget-colorbutton="false" data-widget-deletebutton="false">
				<!-- widget options:
				usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">

				data-widget-colorbutton="false"
				data-widget-editbutton="false"
				data-widget-togglebutton="false"
				data-widget-deletebutton="false"
				data-widget-fullscreenbutton="false"
				data-widget-custombutton="false"
				data-widget-collapsed="true"
				data-widget-sortable="false"

				-->
				<header>
					<span class="widget-icon"> <i class="glyphicon glyphicon-stats txt-color-darken"></i> </span>
					<h2>CPU实时数据 </h2>

					<ul class="nav nav-tabs pull-right in" id="myTab">
						<li class="active">
							<a data-toggle="tab" href="#s1"><i class="fa fa-clock-o"></i> <span class="hidden-mobile hidden-tablet">实时状态</span></a>
						</li>
<!--   隐藏一周的图表
						<li>
							<a data-toggle="tab" href="#s4"><i class="fa fa-facebook"></i> <span class="hidden-mobile hidden-tablet">一周检测</span></a>
						</li>
 -->
						<li>
							<a data-toggle="tab" href="#s5"><i class="fa fa-dollar"></i> <span class="hidden-mobile hidden-tablet">一月检测</span></a>
						</li>
					</ul>

				</header>

				<!-- widget div-->
				<div class="no-padding">
					<!-- widget edit box -->
					<div class="jarviswidget-editbox">
						test
					</div>
					<!-- end widget edit box -->

					<div class="widget-body">
						<!-- content -->
						<div id="myTabContent" class="tab-content"><!-- 基于标签式的导航实例 -->
							<div class="tab-pane fade in active padding-10 no-padding-bottom" id="s1"><!-- fade in 这个属性是设置淡入淡出效果 -->
								<div class="row no-space">
								<!-- 修改zdl col-xs-12 col-sm-12 col-md-8 col-lg-8-->
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<span class="demo-liveupdate-1"> <span class="onoffswitch-title">24时查看</span> <span class="onoffswitch">
												<input type="checkbox" name="start_interval" class="onoffswitch-checkbox" id="start_interval">
												<label class="onoffswitch-label" for="start_interval"> 
													<span class="onoffswitch-inner" data-swchon-text="ON" data-swchoff-text="OFF"></span> 
													<span class="onoffswitch-switch"></span> </label> </span> </span>
										<div id="updating-chart" class="chart-large txt-color-blue"></div>
<div id="updating-chart-cpu-demo" style="height:100px;width:100%"  class="chart-large txt-color-blue"></div>
									</div>
							
								</div>

							</div>
							<!-- end s1 tab pane -->

							
							<div class="tab-pane fade  in padding-10 no-padding-bottom" id="s5">
								<div class="row no-space">
									<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
										<span class="demo-liveupdate-1"> <span class="onoffswitch-title">一月查看</span> <span class="onoffswitch">
												<input type="checkbox" name="start_interval_2" class="onoffswitch-checkbox" id="start_interval_2">
												<label class="onoffswitch-label" for="start_interval_2"> 
													<span class="onoffswitch-inner" data-swchon-text="ON" data-swchoff-text="OFF"></span> 
													<span class="onoffswitch-switch"></span> </label> </span> </span>
										<div id="updating-chart_2" class="chart-large txt-color-blue"></div>
									<div id="updating-chart-cpu-2-demo" style="height:100px;width:100%"  class="chart-large txt-color-blue"></div>
									</div>
								</div>
							</div>
							
<!-- 方便查看下面的js代码
	<div class="tab-pane fade" id="s2">
								<div class="widget-body-toolbar bg-color-white">

									<form class="form-inline" role="form">

										<div class="form-group">
											<label class="sr-only" for="s123">Show From</label>
											<input type="email" class="form-control input-sm" id="s123" placeholder="Show From">
										</div>
										<div class="form-group">
											<input type="email" class="form-control input-sm" id="s124" placeholder="To">
										</div>

										<div class="btn-group hidden-phone pull-right hidden-xs">
											<a class="btn dropdown-toggle btn-xs btn-default" data-toggle="dropdown"><i class="fa fa-cog"></i> More <span class="caret"> </span> </a>
											<ul class="dropdown-menu pull-right">
												<li>
													<a href="javascript:void(0);"><i class="fa fa-file-text-alt"></i> Export to PDF</a>
												</li>
												<li>
													<a href="javascript:void(0);"><i class="fa fa-question-sign"></i> Help</a>
												</li>
											</ul>
										</div>

									</form>

								</div>
								<div class="padding-10">
									<div id="statsChart" class="chart-large has-legend-unique"></div>
								</div>

							</div>
							<!-- end s2 tab pane 

							<div class="tab-pane fade" id="s3">

								<div class="widget-body-toolbar bg-color-white smart-form" id="rev-toggles">

									<div class="inline-group">

										<label for="gra-0" class="checkbox">
											<input type="checkbox" name="gra-0" id="gra-0" checked="checked">
											<i></i> Target </label>
										<label for="gra-1" class="checkbox">
											<input type="checkbox" name="gra-1" id="gra-1" checked="checked">
											<i></i> Actual </label>
										<label for="gra-2" class="checkbox">
											<input type="checkbox" name="gra-2" id="gra-2" checked="checked">
											<i></i> Signups </label>
									</div>

									<div class="btn-group hidden-phone pull-right hidden-xs">
										<a class="btn dropdown-toggle btn-xs btn-default" data-toggle="dropdown"><i class="fa fa-cog"></i> More <span class="caret"> </span> </a>
										<ul class="dropdown-menu pull-right">
											<li>
												<a href="javascript:void(0);"><i class="fa fa-file-text-alt"></i> Export to PDF</a>
											</li>
											<li>
												<a href="javascript:void(0);"><i class="fa fa-question-sign"></i> Help</a>
											</li>
										</ul>
									</div>

								</div>

								<div class="padding-10">
									<div id="flotcontainer" class="chart-large has-legend-unique"></div>
								</div>
							</div>
			 -->				
							<!-- end s3 tab pane -->
						</div>

						<!-- end content -->
					</div>

				</div>
				<!-- end widget div -->
			</div>
			<!-- end widget -->

		</article>
	</div>

	<!-- end row -->

	<!-- row -->

	

	<!-- end row -->

</section>
<!-- end widget grid -->

<script type="text/javascript">
	/* DO NOT REMOVE : GLOBAL FUNCTIONS!
	 *
	 * pageSetUp(); WILL CALL THE FOLLOWING FUNCTIONS
	 *
	 * // activate tooltips
	 * $("[rel=tooltip]").tooltip();
	 *
	 * // activate popovers
	 * $("[rel=popover]").popover();
	 *
	 * // activate popovers with hover states
	 * $("[rel=popover-hover]").popover({ trigger: "hover" });
	 *
	 * // activate inline charts
	 * runAllCharts();
	 *
	 * // setup widgets
	 * setup_widgets_desktop();
	 *
	 * // run form elements
	 * runAllForms();
	 *
	 ********************************
	 *
	 * pageSetUp() is needed whenever you load a page.
	 * It initializes and checks for all basic elements of the page
	 * and makes rendering easier.
	 *
	 */

	

	pageSetUp();

	/*
	 * PAGE RELATED SCRIPTS
	 */

	// pagefunction  
var flot_updating_chart_cpu, flot_updating_chart_cpu_1,flot_updating_chart_cpu_2;
	var pagefunction_cpu = function() {
	
/**1
		$(".js-status-update a").click(function () {
		    var selText = $(this).text();
		    var $this = $(this);
		    $this.parents('.btn-group').find('.dropdown-toggle').html(selText + ' <span class="caret"></span>');
		    $this.parents('.dropdown-menu').find('li').removeClass('active');
		    $this.parent().addClass('active');
		});

		/*
		 * TODO: add a way to add more todo's to list
		 */

		// initialize sortable
/**2
	    $("#sortable1, #sortable2").sortable({
	        handle: '.handle',
	        connectWith: ".todo",
	        update: countTasks
	    }).disableSelection();

**/
		// check and uncheck
/**3		$('.todo .checkbox > input[type="checkbox"]').click(function () {
		    var $this = $(this).parent().parent().parent();

		    if ($(this).prop('checked')) {
		        $this.addClass("complete");

		        // remove this if you want to undo a check list once checked
		        //$(this).attr("disabled", true);
		        $(this).parent().hide();

		        // once clicked - add class, copy to memory then remove and add to sortable3
		        $this.slideUp(500, function () {
		            $this.clone().prependTo("#sortable3").effect("highlight", {}, 800);
		            $this.remove();
		            countTasks();
		        });
		    } else {
		        // insert undo code here...
		    }

		})
		// count tasks
		function countTasks() {

		    $('.todo-group-title').each(function () {
		        var $this = $(this);
		        $this.find(".num-of-tasks").text($this.next().find("li").size());
		    });

		}

		/*
		 * RUN PAGE GRAPHS
		 */

		// load all flot plugins
		loadScript("js/plugin/flot/jquery.flot.cust.min.js", function(){
			loadScript("js/plugin/flot/jquery.flot.resize.min.js", function(){
				loadScript("js/plugin/flot/jquery.flot.time.min.js", function(){
					loadScript("js/plugin/flot/jquery.flot.tooltip.min.js", generatePageGraphs);
				});
			});
		});


		function generatePageGraphs() {
 var $on = false;
		    /* TAB 1: UPDATING CHART */ 
		    // For the demo we use generated data, but normally it would be coming from the server
		      var updateInterval = 1500,
		        totalPoints = 1440,
		        $UpdatingChartColors = $("#updating-chart").css('color');
		        
		        
		     	var rea = [];
				var data1=[];
				var data = [];
          //获得后台数据
		    function getRandomData() {
		   
		     
		    $("#updating-chart").val(updateInterval).change(function () {

		        var v = $(this).val();
		        if (v && !isNaN(+v)) {
		            updateInterval = +v;
		            $(this).val("" + updateInterval);
		        }

		    });
		    	
		        var res=[];
		            $.ajax({
		            	url:"cpu/Day.do",
		            	dataType:"json",
		            	type:"get",
		            	success:function(result,textStatus,jqXHR){
		            	debugger;
		            	res=[];
		     			rea = [];
						data = [];
		            	$.each(result,function(k,v){
		            	if(k=="cpu"){
		            	try{
		            	$.each(v,function(k1,v1){
		            	   		var y = v1.value;
		            			data.push(y);
		            			var va=v1.timestamp;
		            			var x=parseInt(va*1000);
		            			rea.push(x);
		            	   		});
            	   		}catch(err){
            	   		alert("cpu后台无数据");
		            	}
		            	
		            	   	
		            	}
		            	   		
		            	   });
		            	},
		            	error:function(jqXHR, textStatus, errorThrown){
		            	debugger;
		            	alert("cuowu");
		            	}
		            });
		              for (var i = 0; i < data.length; i++){
		            	res.push([rea[i], data[i]])
		            	}
		            	debugger;
		            	console.log(res);
		            return res;
		    }

 			var d=new Date();
		     d.setMinutes(d.getMinutes()-1);
		     var d1=new Date();
		     d1.setDate(d1.getDate()-1);
		    
		    // setup plot
		    var options = {
		        yaxis: {
		       		ticks: [[0, "0"], [10, "10"], [20, "20"], [30, "30"], [40, "40"], [50, "50"],[60,"60"],[70,"70"],[80,"80"],[90,"90"],[100,"100"]],
		            min: 0,
		            max: 100
		        },
		        xaxis: {
		        	mode: "time" ,
    				timeformat: "%m/%d/%h" ,
    				tickSize: [2, "hour"],
    				min:d1,
    				max:d
		        },
		        
		        colors: [$UpdatingChartColors],
		        
		        series: {
		            lines: {
		            	show:true,
		                lineWidth: 1,
		                steps: false

		            }
		        }
		    };

		    flot_updating_chart_cpu= $.plot($("#updating-chart"), [getRandomData()], options);
		     /*****************************************zdl建立一天cpu伸缩轴****************************/
		var overview = $.plot("#updating-chart-cpu-demo",  [getRandomData()], {  //建立下面的样表
            series: {
                lines: {
                    show: true,
                    lineWidth: 1,
                     fill: true,
		                fillColor: {
		                    colors: [{
		                        opacity: 0.4
		                    }, {
		                        opacity: 0
		                    }]
		                },
                },
                shadowSize: 0
            },
            xaxis: {
		        	mode: "time" ,
    				timeformat: "%m/%d/%h" ,
    				tickSize: [2, "hour"],
    				min:d1,
    				max:d
		        },
            yaxis: {
             ticks: [[0, "0"],  [50, "50"],[100,"100"]],
                min: 0,
                autoscaleMargin: 0.1//自动缩放间隔空余 压缩空余间隔
            },
            selection: {
                mode: "x"
            }
        });
        //对原图表建立可点击伸缩轴
        $("#updating-chart").bind("plotselected", function (event, ranges) {
            // do the zooming
            $.each(flot_updating_chart_cpu.getXAxes(), function(_, axis) {
                var opts = axis.options;
                opts.min = ranges.xaxis.from;
                opts.max = ranges.xaxis.to;
            });
            flot_updating_chart_cpu.setupGrid();
            flot_updating_chart_cpu.draw();
            flot_updating_chart_cpu.clearSelection();
            // don't fire event on the overview to prevent eternal loop
            overview.setSelection(ranges, true);
        });
        //对样表建立伸缩轴
        $("#updating-chart-cpu-demo").bind("plotselected", function (event, ranges) {
            flot_updating_chart_cpu.setSelection(ranges);
        });   
        
 /*****************************一天cpu伸缩轴建立结束*********************************************/  
		    // setup control widget    //这是开始时的刷新时间，后面的是执行后刷新的时间
 function update() {

				try {
			        if ($on == true) {
			            flot_updating_chart_cpu.setData([getRandomData()]);
			            flot_updating_chart_cpu.draw();
			            overview.setData([getRandomData()]);
			            overview.draw();
			            setTimeout(update, updateInterval);

			        } else {
			            clearInterval(updateInterval)
			        }
				}
				catch(err) {
				    clearInterval(updateInterval);
				}

		    }

		    /* live switch */
		    $('input[type="checkbox"]#start_interval').click(function () {
		        if ($(this).prop('checked')) {
		            $on = true;
		            updateInterval = 3000;
		            update();
		        } else {
		            clearInterval(updateInterval);
		            $on = false;
		        }
		    });
		     
		     

/*start start_interval_2      进行一月检测时 */
				var rea_m = [];
		    	 var res_m=[];
				 var data1=[];
				var data_m = [];
		     function getRandomData_2() {
		            var re;
		            $.ajax({
		            	url:"cpu/Month.do",
		            	dataType:"json",
		            	method:"get",
		            	success:function(result,textStatus,jqXHR){
		            	rea_m = [];
		    	 		res_m=[];
				 		data1=[];
						data_m = [];
		            	$.each(result,function(k,v){
		            	if(k=="cpu_month"){
		            	try{
		            	$.each(v,function(k1,v1){
		            	   		var y = v1.value;
		            			data_m.push(y);
		            	   		});
		            	   		$.each(v,function(k1,v1){
		            	   		var va=v1.timestamp;
		            			var x=parseInt(va*1000);
		            			rea_m.push(x);
		            	   		});
		            	}catch(err){
		            	alert("cpu_month为空");
		            	}
		            	
		            	}
		            	   		
		            	   });
		            	},
		            	error:function(jqXHR, textStatus, errorThrown){
		            	}
		            });
		              for (var i = 0; i < data_m.length; i++){
		            	res_m.push([rea_m[i], data_m[i]])
		            	}
		            	
		            return res_m;
		    }

				var d=new Date();
		     d.setMinutes(d.getMinutes()-1);
		     var d1=new Date();
		     d1.setMonth(d1.getMonth()-1);
		     // setup plot
		    var options_2 = {
		        yaxis: {
		       		ticks: [[0, "0"], [10, "10"], [20, "20"], [30, "30"], [40, "40"], [50, "50"],[60,"60"],[70,"70"],[80,"80"],[90,"90"],[100,"100"]],
		            min: 0,
		            max: 100
		        },
		        xaxis: {
		        	mode: "time" ,
    				timeformat: "%m/%d/%h" ,
    				tickSize: [3, "day"],
    				min:d1,
    				max:d
		        },
		        
		        colors: [$UpdatingChartColors],
		        
		        series: {
		            lines: {
		                lineWidth: 1,
		                fill: true,
		                fillColor: {
		                    colors: [{
		                        opacity: 0.4
		                    }, {
		                        opacity: 0
		                    }]
		                },
		                steps: false

		            }
		        }
		    };

 flot_updating_chart_cpu_2 = $.plot($("#updating-chart_2"), [getRandomData_2()], options_2);
     /*********************************************************************/
		var overview2 = $.plot("#updating-chart-cpu-2-demo", [getRandomData_2()], {
            series: {
                lines: {
                    show: true,
                    lineWidth: 1,
                     fill: true,
		                fillColor: {
		                    colors: [{
		                        opacity: 0.4
		                    }, {
		                        opacity: 0
		                    }]
		                },
                },
                shadowSize: 0
            },
            xaxis: {
		        	mode: "time" ,
    				timeformat: "%m/%d/%h" ,
    				tickSize: [3, "day"],
    				min:d1,
    				max:d
		        },
            yaxis: {
             ticks: [[0, "0"],  [50, "50"],[100,"100"]],
                min: 0,
                autoscaleMargin: 0.1//自动缩放间隔空余 压缩空余间隔
            },
            selection: {
                mode: "x"
            }
        });
        
        $("#updating-chart_2").bind("plotselected", function (event, ranges) {
            // do the zooming
            $.each(flot_updating_chart_cpu_2.getXAxes(), function(_, axis) {
                var opts = axis.options;
                opts.min = ranges.xaxis.from;
                opts.max = ranges.xaxis.to;
            });
            flot_updating_chart_cpu_2.setupGrid();
            flot_updating_chart_cpu_2.draw();
            flot_updating_chart_cpu_2.clearSelection();
            // don't fire event on the overview to prevent eternal loop
            overview2.setSelection(ranges, true);
        });
        $("#updating-chart-cpu-2-demo").bind("plotselected", function (event, ranges) {
            flot_updating_chart_cpu_2.setSelection(ranges);
        });   
        
 /**************************************************************************/  
 function update_2() {
				try {
			        if ($on == true) {
			            flot_updating_chart_cpu_2.setData([getRandomData_2()]);
			            flot_updating_chart_cpu_2.draw();
			            overview2.setData([getRandomData_2()]);
			            overview2.draw();
			            setTimeout(update, updateInterval);
			        } else {
			            clearInterval(updateInterval)
			        }
				}
				catch(err) {
				    clearInterval(updateInterval);
				}
		    }

  $('input[type="checkbox"]#start_interval_2').click(function () {
		        if ($(this).prop('checked')) {
		            $on = true;
		            updateInterval = 60000;
		            update_2();
		        } else {
		            clearInterval(updateInterval);
		            $on = false;
		        }
		    });
		    
		       
		    
				
		    
		     
		    
		     
/*end atart_interval_2*/
/**		    function update() {

				try {
			        if ($on == true) {
			            flot_updating_chart.setData([getRandomData()]);
			            flot_updating_chart.draw();
			            setTimeout(update, updateInterval);

			        } else {
			            clearInterval(updateInterval)
			        }
				}
				catch(err) {
				    clearInterval(updateInterval);
				}

		    }
**/
		 

		    /*end updating chart*/

		    /* TAB 2: Social Network  */
/**4
		    $(function () {
		        // jQuery Flot Chart
		        var twitter = [
		            [1, 27],
		            [2, 34],
		            [3, 51],
		            [4, 48],
		            [5, 55],
		            [6, 65],
		            [7, 61],
		            [8, 70],
		            [9, 65],
		            [10, 75],
		            [11, 57],
		            [12, 59],
		            [13, 62]
		        ],
		            facebook = [
		                [1, 25],
		                [2, 31],
		                [3, 45],
		                [4, 37],
		                [5, 38],
		                [6, 40],
		                [7, 47],
		                [8, 55],
		                [9, 43],
		                [10, 50],
		                [11, 47],
		                [12, 39],
		                [13, 47]
		            ],
		            data = [{
		                label: "Twitter",
		                data: twitter,
		                lines: {
		                    show: true,
		                    lineWidth: 1,
		                    fill: true,
		                    fillColor: {
		                        colors: [{
		                            opacity: 0.1
		                        }, {
		                            opacity: 0.13
		                        }]
		                    }
		                },
		                points: {
		                    show: true
		                }
		            }, {
		                label: "Facebook",
		                data: facebook,
		                lines: {
		                    show: true,
		                    lineWidth: 1,
		                    fill: true,
		                    fillColor: {
		                        colors: [{
		                            opacity: 0.1
		                        }, {
		                            opacity: 0.13
		                        }]
		                    }
		                },
		                points: {
		                    show: true
		                }
		            }];

		        var options = {
		            grid: {
		                hoverable: true
		            },
		            colors: ["#568A89", "#3276B1"],
		            tooltip: true,
		            tooltipOpts: {
		                //content : "Value <b>$x</b> Value <span>$y</span>",
		                defaultTheme: false
		            },
		            xaxis: {
		                ticks: [
		                    [1, "JAN"],
		                    [2, "FEB"],
		                    [3, "MAR"],
		                    [4, "APR"],
		                    [5, "MAY"],
		                    [6, "JUN"],
		                    [7, "JUL"],
		                    [8, "AUG"],
		                    [9, "SEP"],
		                    [10, "OCT"],
		                    [11, "NOV"],
		                    [12, "DEC"],
		                    [13, "JAN+1"]
		                ]
		            },
		            yaxes: {

		            }
		        };

		        flot_statsChart = $.plot($("#statsChart"), data, options);
		    });

		    // END TAB 2

		    // TAB THREE GRAPH //
		    /* TAB 3: Revenew  */
/**5
		    $(function () {

		        var trgt = [
		            [1354586000000, 153],
		            [1364587000000, 658],
		            [1374588000000, 198],
		            [1384589000000, 663],
		            [1394590000000, 801],
		            [1404591000000, 1080],
		            [1414592000000, 353],
		            [1424593000000, 749],
		            [1434594000000, 523],
		            [1444595000000, 258],
		            [1454596000000, 688],
		            [1464597000000, 364]
		        ],
		            prft = [
		                [1354586000000, 53],
		                [1364587000000, 65],
		                [1374588000000, 98],
		                [1384589000000, 83],
		                [1394590000000, 980],
		                [1404591000000, 808],
		                [1414592000000, 720],
		                [1424593000000, 674],
		                [1434594000000, 23],
		                [1444595000000, 79],
		                [1454596000000, 88],
		                [1464597000000, 36]
		            ],
		            sgnups = [
		                [1354586000000, 647],
		                [1364587000000, 435],
		                [1374588000000, 784],
		                [1384589000000, 346],
		                [1394590000000, 487],
		                [1404591000000, 463],
		                [1414592000000, 479],
		                [1424593000000, 236],
		                [1434594000000, 843],
		                [1444595000000, 657],
		                [1454596000000, 241],
		                [1464597000000, 341]
		            ],
		            toggles = $("#rev-toggles"),
		            target = $("#flotcontainer");

		        var data = [{
		            label: "Target Profit",
		            data: trgt,
		            bars: {
		                show: true,
		                align: "center",
		                barWidth: 30 * 30 * 60 * 1000 * 80
		            }
		        }, {
		            label: "Actual Profit",
		            data: prft,
		            color: '#3276B1',
		            lines: {
		                show: true,
		                lineWidth: 3
		            },
		            points: {
		                show: true
		            }
		        }, {
		            label: "Actual Signups",
		            data: sgnups,
		            color: '#71843F',
		            lines: {
		                show: true,
		                lineWidth: 1
		            },
		            points: {
		                show: true
		            }
		        }]

		        var options = {
		            grid: {
		                hoverable: true
		            },
		            tooltip: true,
		            tooltipOpts: {
		                //content: '%x - %y',
		                //dateFormat: '%b %y',
		                defaultTheme: false
		            },
		            xaxis: {
		                mode: "time"
		            },
		            yaxes: {
		                tickFormatter: function (val, axis) {
		                    return "$" + val;
		                },
		                max: 1200
		            }

		        };

		        flot_multigraph = null;

		        function plotNow() {
		            var d = [];
		            toggles.find(':checkbox').each(function () {
		                if ($(this).is(':checked')) {
		                    d.push(data[$(this).attr("name").substr(4, 1)]);
		                }
		            });
		            if (d.length > 0) {
		                if (flot_multigraph) {
		                    flot_multigraph.setData(d);
		                    flot_multigraph.draw();
		                } else {
		                    flot_multigraph = $.plot(target, d, options);
		                }
		            }

		        };

		        toggles.find(':checkbox').on('change', function () {
		            plotNow();
		        });

		        plotNow()

		    });

		}

		/*
		 * VECTOR MAP
		 */
/**6
		data_array = {
		    "US": 4977,
		    "AU": 4873,
		    "IN": 3671,
		    "BR": 2476,
		    "TR": 1476,
		    "CN": 146,
		    "CA": 134,
		    "BD": 100
		};

		// Load Map dependency 1 then call for dependency 2 and then run renderVectorMap function
		loadScript("js/plugin/vectormap/jquery-jvectormap-1.2.2.min.js", function(){
			loadScript("js/plugin/vectormap/jquery-jvectormap-world-mill-en.js", renderVectorMap);
		});


		function renderVectorMap() {
		    $('#vector-map').vectorMap({
		        map: 'world_mill_en',
		        backgroundColor: '#fff',
		        regionStyle: {
		            initial: {
		                fill: '#c4c4c4'
		            },
		            hover: {
		                "fill-opacity": 1
		            }
		        },
		        series: {
		            regions: [{
		                values: data_array,
		                scale: ['#85a8b6', '#4d7686'],
		                normalizeFunction: 'polynomial'
		            }]
		        },
		        onRegionLabelShow: function (e, el, code) {
		            if (typeof data_array[code] == 'undefined') {
		                e.preventDefault();
		            } else {
		                var countrylbl = data_array[code];
		                el.html(el.html() + ': ' + countrylbl + ' visits');
		            }
		        }
		    });
		}

		/*
		 * FULL CALENDAR JS
		 */

		// Load Calendar dependency then setup calendar

		loadScript("js/plugin/moment/moment.min.js", function(){
//			loadScript("js/plugin/fullcalendar/jquery.fullcalendar.min.js", setupCalendar);
		});
/**6
		function setupCalendar() {

		    if ($("#calendar").length) {
		        var date = new Date();
		        var d = date.getDate();
		        var m = date.getMonth();
		        var y = date.getFullYear();

		        calendar = $('#calendar').fullCalendar({

		            editable: true,
		            draggable: true,
		            selectable: false,
		            selectHelper: true,
		            unselectAuto: false,
		            disableResizing: false,
					height: "auto",

		            header: {
		                left: 'title', //,today
		                center: 'prev, next, today',
		                right: 'month, agendaWeek, agenDay' //month, agendaDay,
		            },

		            select: function (start, end, allDay) {
		                var title = prompt('Event Title:');
		                if (title) {
		                    calendar.fullCalendar('renderEvent', {
		                            title: title,
		                            start: start,
		                            end: end,
		                            allDay: allDay
		                        }, true // make the event "stick"
		                    );
		                }
		                calendar.fullCalendar('unselect');
		            },

		            events: [{
		                title: 'All Day Event',
		                start: new Date(y, m, 1),
		                description: 'long description',
		                className: ["event", "bg-color-greenLight"],
		                icon: 'fa-check'
		            }, {
		                title: 'Long Event',
		                start: new Date(y, m, d - 5),
		                end: new Date(y, m, d - 2),
		                className: ["event", "bg-color-red"],
		                icon: 'fa-lock'
		            }, {
		                id: 999,
		                title: 'Repeating Event',
		                start: new Date(y, m, d - 3, 16, 0),
		                allDay: false,
		                className: ["event", "bg-color-blue"],
		                icon: 'fa-clock-o'
		            }, {
		                id: 999,
		                title: 'Repeating Event',
		                start: new Date(y, m, d + 4, 16, 0),
		                allDay: false,
		                className: ["event", "bg-color-blue"],
		                icon: 'fa-clock-o'
		            }, {
		                title: 'Meeting',
		                start: new Date(y, m, d, 10, 30),
		                allDay: false,
		                className: ["event", "bg-color-darken"]
		            }, {
		                title: 'Lunch',
		                start: new Date(y, m, d, 12, 0),
		                end: new Date(y, m, d, 14, 0),
		                allDay: false,
		                className: ["event", "bg-color-darken"]
		            }, {
		                title: 'Birthday Party',
		                start: new Date(y, m, d + 1, 19, 0),
		                end: new Date(y, m, d + 1, 22, 30),
		                allDay: false,
		                className: ["event", "bg-color-darken"]
		            }, {
		                title: 'Smartadmin Open Day',
		                start: new Date(y, m, 28),
		                end: new Date(y, m, 29),
		                className: ["event", "bg-color-darken"]
		            }],

		            eventRender: function (event, element, icon) {
		                if (!event.description == "") {
		                    element.find('.fc-title').append("<br/><span class='ultra-light'>" + event.description + "</span>");
		                }
		                if (!event.icon == "") {
		                    element.find('.fc-title').append("<i class='air air-top-right fa " + event.icon + " '></i>");
		                }
		            }
		        });

		    };

		    /* hide default buttons */
/**7		    
		    $('.fc-toolbar .fc-right, .fc-toolbar .fc-center').hide();

		}

		// calendar prev
		$('#calendar-buttons #btn-prev').click(function () {
		    $('.fc-prev-button').click();
		    return false;
		});

		// calendar next
		$('#calendar-buttons #btn-next').click(function () {
		    $('.fc-next-button').click();
		    return false;
		});

		// calendar today
		$('#calendar-buttons #btn-today').click(function () {
		    $('.fc-button-today').click();
		    return false;
		});

		// calendar month
		$('#mt').click(function () {
		    $('#calendar').fullCalendar('changeView', 'month');
		});

		// calendar agenda week
		$('#ag').click(function () {
		    $('#calendar').fullCalendar('changeView', 'agendaWeek');
		});

		// calendar agenda day
		$('#td').click(function () {
		    $('#calendar').fullCalendar('changeView', 'agendaDay');
		});

		/*
		 * CHAT
		 */
/**9
		var filter_input = $('#filter-chat-list'),
			chat_users_container = $('#chat-container > .chat-list-body'),
			chat_users = $('#chat-users'),
			chat_list_btn = $('#chat-container > .chat-list-open-close'),
			chat_body = $('#chat-body');

		/*
		 * LIST FILTER (CHAT)
		 */

		// custom css expression for a case-insensitive contains()
 /***10
		jQuery.expr[':'].Contains = function (a, i, m) {
		    return (a.textContent || a.innerText || "").toUpperCase().indexOf(m[3].toUpperCase()) >= 0;
		};

		function listFilter(list) {
			// header is any element, list is an unordered list
		    // create and add the filter form to the header

		    filter_input.change(function () {
		        var filter = $(this).val();
		        if (filter) {
		            // this finds all links in a list that contain the input,
		            // and hide the ones not containing the input while showing the ones that do
		            chat_users.find("a:not(:Contains(" + filter + "))").parent().slideUp();
		            chat_users.find("a:Contains(" + filter + ")").parent().slideDown();
		        } else {
		            chat_users.find("li").slideDown();
		        }
		        return false;
		    }).keyup(function () {
		        // fire the above change event after every letter
		        $(this).change();

		    });

		}

		// on dom ready
		listFilter(chat_users);

		// open chat list
		chat_list_btn.click(function () {
		    $(this).parent('#chat-container').toggleClass('open');
		})

		chat_body.animate({
		    scrollTop: chat_body[0].scrollHeight
		}, 500);
**/
	};
};///这是我自己添加的
	// end pagefunction

	// destroy generated instances 
	// pagedestroy is called automatically before loading a new page
	// only usable in AJAX version!

//	var pagedestroy = function(){

		// destroy calendar
//		calendar.fullCalendar('destroy');
//		calendar = null;

		//destroy flots
//		flot_updating_chart.shutdown();
//		flot_updating_chart=null;
//		flot_statsChart.shutdown();
//		flot_statsChart = null;

//		flot_multigraph.shutdown();
//		flot_multigraph = null;

		// destroy vector map objects
//		$('#vector-map').find('*').addBack().off().remove();

		// destroy todo
//		$("#sortable1, #sortable2").sortable("destroy");
//		$('.todo .checkbox > input[type="checkbox"]').off();

		// destroy misc events
//		$("#rev-toggles").find(':checkbox').off();
//		$('#chat-container').find('*').addBack().off().remove();

		// debug msg
//		if (debugState){
//			root.console.log("鉁� Calendar, Flot Charts, Vector map, misc events destroyed");
//		}

//	}

	// end destroy
var pagedestroy = function(){

		// destroy calendar
	
		//destroy flots
		flot_updating_chart_cpu.shutdown();
		flot_updating_chart_cpu=null;
		flot_updating_chart_cpu_1.shutdown();
		flot_updating_chart_cpu_1=null;
		flot_updating_chart_cpu_2.shutdown();
		flot_updating_chart_cpu_2=null;
}
	// run pagefunction on load

   pagefunction_cpu();
	


</script>

